<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>消息通知 - 都市信息网</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/layui/2.6.8/css/layui.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        body {
            background-color: #f2f3f5;
            padding: 15px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .page-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .notification-tabs {
            background-color: #fff;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .notification-list {
            padding: 0;
        }
        
        .notification-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: flex-start;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .notification-item:hover {
            background-color: #f9f9f9;
        }
        
        .notification-item.unread {
            background-color: #f0f7ff;
        }
        
        .notify-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #e8f4fd;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .notify-icon.system {
            background-color: #e8f4fd;
        }
        
        .notify-icon.interaction {
            background-color: #fef3c7;
        }
        
        .notify-icon.service {
            background-color: #e6f7ee;
        }
        
        .notify-icon i {
            font-size: 18px;
            color: #2563eb;
        }
        
        .notify-icon.interaction i {
            color: #d97706;
        }
        
        .notify-icon.service i {
            color: #10b981;
        }
        
        .notify-content {
            flex: 1;
        }
        
        .notify-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: #1f2937;
        }
        
        .notify-desc {
            color: #6b7280;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .notify-time {
            color: #9ca3af;
            font-size: 12px;
            margin-top: 5px;
        }
        
        .unread-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #ef4444;
            margin-left: 10px;
            margin-top: 8px;
        }
        
        .notify-actions {
            margin-left: 15px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 8px;
        }
        
        .action-btn {
            color: #6b7280;
            font-size: 12px;
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .action-btn:hover {
            color: #2563eb;
        }
        
        .notification-empty {
            padding: 60px 20px;
            text-align: center;
            color: #9ca3af;
        }
        
        .notification-empty i {
            font-size: 48px;
            margin-bottom: 20px;
            color: #d1d5db;
        }
        
        .setting-group {
            background-color: #fff;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        
        .setting-title {
            padding: 15px 20px;
            font-weight: 600;
            border-bottom: 1px solid #eee;
        }
        
        .setting-content {
            padding: 15px 20px;
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px dashed #eee;
        }
        
        .setting-item:last-child {
            border-bottom: none;
        }
        
        .setting-info {
            display: flex;
            flex-direction: column;
        }
        
        .setting-name {
            font-weight: 500;
            margin-bottom: 3px;
        }
        
        .setting-desc {
            font-size: 12px;
            color: #6b7280;
        }
        
        .operate-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 10px 0;
        }
        
        .batch-actions {
            display: flex;
            gap: 10px;
        }
        
        .search-box {
            width: 300px;
        }
        
        @media (max-width: 768px) {
            .error-code {
                font-size: 6rem;
            }
            
            .operate-bar {
                flex-direction: column;
                gap: 10px;
            }
            
            .search-box {
                width: 100%;
            }
            
            .notification-item {
                flex-wrap: wrap;
            }
            
            .notify-actions {
                width: 100%;
                margin-left: 55px;
                flex-direction: row;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="page-title">消息通知</div>
        
        <div class="operate-bar">
            <div class="batch-actions">
                <button class="layui-btn layui-btn-primary layui-btn-sm" id="mark-all-read">
                    <i class="fa fa-check-circle-o"></i> 全部标为已读
                </button>
                <button class="layui-btn layui-btn-primary layui-btn-sm" id="delete-selected">
                    <i class="fa fa-trash-o"></i> 删除选中
                </button>
                <button class="layui-btn layui-btn-primary layui-btn-sm" id="delete-all">
                    <i class="fa fa-trash"></i> 清空全部
                </button>
            </div>
            
            <div class="search-box">
                <div class="layui-input-group">
                    <input type="text" class="layui-input" placeholder="搜索通知内容...">
                    <span class="layui-input-group-addon">
                        <i class="fa fa-search"></i>
                    </span>
                </div>
            </div>
        </div>
        
        <div class="layui-tab notification-tabs" lay-filter="notification-tab">
            <ul class="layui-tab-title">
                <li class="layui-this" lay-id="all">全部消息 <span class="layui-badge">8</span></li>
                <li lay-id="system">系统通知 <span class="layui-badge">3</span></li>
                <li lay-id="interaction">互动提醒 <span class="layui-badge">5</span></li>
                <li lay-id="service">服务通知</li>
                <li lay-id="settings">消息设置</li>
            </ul>
            
            <div class="layui-tab-content">
                <!-- 全部消息 -->
                <div class="layui-tab-item layui-show">
                    <ul class="notification-list layui-list">
                        <!-- 系统通知 -->
                        <li class="notification-item unread">
                            <div class="notify-icon system">
                                <i class="fa fa-bell"></i>
                            </div>
                            <div class="notify-content">
                                <div class="notify-title">账号安全提醒</div>
                                <div class="notify-desc">您的账号于今天08:30在新设备登录，如非本人操作，请及时修改密码。</div>
                                <div class="notify-time">今天 09:15</div>
                            </div>
                            <div class="unread-dot"></div>
                            <div class="notify-actions">
                                <span class="action-btn mark-read">标为已读</span>
                                <span class="action-btn delete">删除</span>
                            </div>
                        </li>
                        
                        <!-- 互动提醒 -->
                        <li class="notification-item unread">
                            <div class="notify-icon interaction">
                                <i class="fa fa-comment"></i>
                            </div>
                            <div class="notify-content">
                                <div class="notify-title">有人回复了您的帖子</div>
                                <div class="notify-desc">用户"阳光小区张阿姨"回复了您发布的"求推荐靠谱的家电维修师傅"："我认识一个不错的师傅，电话是138****5678"</div>
                                <div class="notify-time">昨天 15:32</div>
                            </div>
                            <div class="unread-dot"></div>
                            <div class="notify-actions">
                                <span class="action-btn mark-read">标为已读</span>
                                <span class="action-btn delete">删除</span>
                                <span class="action-btn view">查看详情</span>
                            </div>
                        </li>
                        
                        <!-- 服务通知 -->
                        <li class="notification-item">
                            <div class="notify-icon service">
                                <i class="fa fa-calendar"></i>
                            </div>
                            <div class="notify-content">
                                <div class="notify-title">社区活动即将开始</div>
                                <div class="notify-desc">您报名的"小区秋季运动会"将于明天09:00在中心广场举行，请准时参加。</div>
                                <div class="notify-time">2023-09-22 10:00</div>
                            </div>
                            <div class="notify-actions">
                                <span class="action-btn mark-read">标为已读</span>
                                <span class="action-btn delete">删除</span>
                            </div>
                        </li>
                        
                        <!-- 系统通知 -->
                        <li class="notification-item unread">
                            <div class="notify-icon system">
                                <i class="fa fa-info-circle"></i>
                            </div>
                            <div class="notify-content">
                                <div class="notify-title">平台功能更新通知</div>
                                <div class="notify-desc">我们已上线"邻里互助"新功能，您可以在首页点击进入，发布或响应邻里求助信息。</div>
                                <div class="notify-time">2023-09-20 08:30</div>
                            </div>
                            <div class="unread-dot"></div>
                            <div class="notify-actions">
                                <span class="action-btn mark-read">标为已读</span>
                                <span class="action-btn delete">删除</span>
                            </div>
                        </li>
                        
                        <!-- 互动提醒 -->
                        <li class="notification-item unread">
                            <div class="notify-icon interaction">
                                <i class="fa fa-thumbs-up"></i>
                            </div>
                            <div class="notify-content">
                                <div class="notify-title">您的发布获得了多个点赞</div>
                                <div class="notify-desc">您发布的"小区门口新开的水果店推荐"获得了12个新点赞，快去看看吧！</div>
                                <div class="notify-time">2023-09-19 16:45</div>
                            </div>
                            <div class="unread-dot"></div>
                            <div class="notify-actions">
                                <span class="action-btn mark-read">标为已读</span>
                                <span class="action-btn delete">删除</span>
                                <span class="action-btn view">查看详情</span>
                            </div>
                        </li>
                    </ul>
                    
                    <!-- 分页 -->
                    <div style="text-align: center; margin: 20px 0;">
                        <div class="layui-box layui-laypage layui-laypage-default">
                            <a href="javascript:;" class="layui-laypage-prev">上一页</a>
                            <span class="layui-laypage-curr"><em class="layui-laypage-em"></em><em>1</em></span>
                            <a href="javascript:;">2</a>
                            <a href="javascript:;">3</a>
                            <a href="javascript:;" class="layui-laypage-next">下一页</a>
                        </div>
                    </div>
                </div>
                
                <!-- 系统通知 -->
                <div class="layui-tab-item">
                    <ul class="notification-list layui-list">
                        <li class="notification-item unread">
                            <div class="notify-icon system">
                                <i class="fa fa-bell"></i>
                            </div>
                            <div class="notify-content">
                                <div class="notify-title">账号安全提醒</div>
                                <div class="notify-desc">您的账号于今天08:30在新设备登录，如非本人操作，请及时修改密码。</div>
                                <div class="notify-time">今天 09:15</div>
                            </div>
                            <div class="unread-dot"></div>
                            <div class="notify-actions">
                                <span class="action-btn mark-read">标为已读</span>
                                <span class="action-btn delete">删除</span>
                            </div>
                        </li>
                        
                        <li class="notification-item unread">
                            <div class="notify-icon system">
                                <i class="fa fa-info-circle"></i>
                            </div>
                            <div class="notify-content">
                                <div class="notify-title">平台功能更新通知</div>
                                <div class="notify-desc">我们已上线"邻里互助"新功能，您可以在首页点击进入，发布或响应邻里求助信息。</div>
                                <div class="notify-time">2023-09-20 08:30</div>
                            </div>
                            <div class="unread-dot"></div>
                            <div class="notify-actions">
                                <span class="action-btn mark-read">标为已读</span>
                                <span class="action-btn delete">删除</span>
                            </div>
                        </li>
                    </ul>
                </div>
                
                <!-- 互动提醒 -->
                <div class="layui-tab-item">
                    <ul class="notification-list layui-list">
                        <li class="notification-item unread">
                            <div class="notify-icon interaction">
                                <i class="fa fa-comment"></i>
                            </div>
                            <div class="notify-content">
                                <div class="notify-title">有人回复了您的帖子</div>
                                <div class="notify-desc">用户"阳光小区张阿姨"回复了您发布的"求推荐靠谱的家电维修师傅"："我认识一个不错的师傅，电话是138****5678"</div>
                                <div class="notify-time">昨天 15:32</div>
                            </div>
                            <div class="unread-dot"></div>
                            <div class="notify-actions">
                                <span class="action-btn mark-read">标为已读</span>
                                <span class="action-btn delete">删除</span>
                                <span class="action-btn view">查看详情</span>
                            </div>
                        </li>
                    </ul>
                </div>
                
                <!-- 服务通知 -->
                <div class="layui-tab-item">
                    <ul class="notification-list layui-list">
                        <li class="notification-item">
                            <div class="notify-icon service">
                                <i class="fa fa-calendar"></i>
                            </div>
                            <div class="notify-content">
                                <div class="notify-title">社区活动即将开始</div>
                                <div class="notify-desc">您报名的"小区秋季运动会"将于明天09:00在中心广场举行，请准时参加。</div>
                                <div class="notify-time">2023-09-22 10:00</div>
                            </div>
                            <div class="notify-actions">
                                <span class="action-btn mark-read">标为已读</span>
                                <span class="action-btn delete">删除</span>
                            </div>
                        </li>
                    </ul>
                </div>
                
                <!-- 消息设置 -->
                <div class="layui-tab-item">
                    <div class="setting-group">
                        <div class="setting-title">通知方式设置</div>
                        <div class="setting-content">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <div class="setting-name">站内消息通知</div>
                                    <div class="setting-desc">所有消息将在网站内显示提醒</div>
                                </div>
                                <div class="layui-form">
                                    <input type="checkbox" checked lay-skin="switch" lay-text="开启|关闭">
                                </div>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <div class="setting-name">短信通知</div>
                                    <div class="setting-desc">重要消息将通过短信发送到您的手机</div>
                                </div>
                                <div class="layui-form">
                                    <input type="checkbox" checked lay-skin="switch" lay-text="开启|关闭">
                                </div>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <div class="setting-name">邮件通知</div>
                                    <div class="setting-desc">消息摘要将通过邮件发送</div>
                                </div>
                                <div class="layui-form">
                                    <input type="checkbox" lay-skin="switch" lay-text="开启|关闭">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <div class="setting-title">消息类型设置</div>
                        <div class="setting-content">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <div class="setting-name">系统通知</div>
                                    <div class="setting-desc">账号安全、系统更新等重要通知</div>
                                </div>
                                <div class="layui-form">
                                    <input type="checkbox" checked lay-skin="switch" lay-text="接收|不接收">
                                </div>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <div class="setting-name">互动提醒</div>
                                    <div class="setting-desc">帖子回复、点赞、收藏等互动消息</div>
                                </div>
                                <div class="layui-form">
                                    <input type="checkbox" checked lay-skin="switch" lay-text="接收|不接收">
                                </div>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <div class="setting-name">服务通知</div>
                                    <div class="setting-desc">活动提醒、服务到期等通知</div>
                                </div>
                                <div class="layui-form">
                                    <input type="checkbox" checked lay-skin="switch" lay-text="接收|不接收">
                                </div>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <div class="setting-name">营销推送</div>
                                    <div class="setting-desc">优惠活动、新功能推荐等消息</div>
                                </div>
                                <div class="layui-form">
                                    <input type="checkbox" lay-skin="switch" lay-text="接收|不接收">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <div class="setting-title">免打扰设置</div>
                        <div class="setting-content">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <div class="setting-name">夜间免打扰</div>
                                    <div class="setting-desc">22:00-08:00期间不发送声音提醒</div>
                                </div>
                                <div class="layui-form">
                                    <input type="checkbox" checked lay-skin="switch" lay-text="开启|关闭">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="layui-btn layui-btn-normal" style="width: 100%; margin-top: 15px;">
                        保存设置
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.staticfile.org/layui/2.6.8/layui.js"></script>
    <script>
        layui.use(['element', 'form', 'layer'], function() {
            var element = layui.element;
            var form = layui.form;
            var layer = layui.layer;
            var $ = layui.jquery;
            
            // 标为已读
            $(document).on('click', '.mark-read', function(e) {
                e.stopPropagation();
                var item = $(this).closest('.notification-item');
                item.removeClass('unread');
                item.find('.unread-dot').remove();
                
                // 更新徽章数量
                updateBadgeCount();
                
                layer.msg('已标为已读');
            });
            
            // 全部标为已读
            $('#mark-all-read').click(function() {
                var unreadItems = $('.notification-item.unread');
                if (unreadItems.length === 0) {
                    layer.msg('没有未读消息');
                    return;
                }
                
                unreadItems.removeClass('unread');
                $('.unread-dot').remove();
                
                // 更新徽章数量
                updateBadgeCount();
                
                layer.msg('全部消息已标为已读');
            });
            
            // 删除消息
            $(document).on('click', '.delete', function(e) {
                e.stopPropagation();
                var item = $(this).closest('.notification-item');
                var index = layer.confirm('确定要删除这条消息吗？', function() {
                    item.remove();
                    
                    // 如果列表为空，显示空状态
                    checkEmptyList();
                    
                    // 更新徽章数量
                    updateBadgeCount();
                    
                    layer.close(index);
                    layer.msg('消息已删除');
                });
            });
            
            // 删除选中
            $('#delete-selected').click(function() {
                var selectedItems = $('.notification-item.selected');
                if (selectedItems.length === 0) {
                    layer.msg('请先选择要删除的消息');
                    return;
                }
                
                selectedItems.remove();
                
                // 如果列表为空，显示空状态
                checkEmptyList();
                
                // 更新徽章数量
                updateBadgeCount();
                
                layer.msg('已删除选中消息');
            });
            
            // 清空全部
            $('#delete-all').click(function() {
                var currentTab = $('.layui-tab-item.layui-show');
                var items = currentTab.find('.notification-item');
                
                if (items.length === 0) {
                    layer.msg('消息列表已为空');
                    return;
                }
                
                var index = layer.confirm('确定要清空全部消息吗？', function() {
                    items.remove();
                    
                    // 显示空状态
                    showEmptyState(currentTab);
                    
                    // 更新徽章数量
                    updateBadgeCount();
                    
                    layer.close(index);
                    layer.msg('已清空全部消息');
                });
            });
            
            // 查看详情
            $(document).on('click', '.view', function(e) {
                e.stopPropagation();
                var title = $(this).closest('.notification-item').find('.notify-title').text();
                layer.open({
                    type: 1,
                    title: title,
                    area: ['600px', '400px'],
                    content: '<div style="padding: 20px;">这里是消息详情内容...</div>'
                });
            });
            
            // 点击消息项查看详情
            $(document).on('click', '.notification-item', function() {
                // 如果是未读消息，点击后标为已读
                if ($(this).hasClass('unread')) {
                    $(this).removeClass('unread');
                    $(this).find('.unread-dot').remove();
                    updateBadgeCount();
                }
                
                var title = $(this).find('.notify-title').text();
                var content = $(this).find('.notify-desc').text();
                var time = $(this).find('.notify-time').text();
                
                layer.open({
                    type: 1,
                    title: title,
                    area: ['600px', '400px'],
                    content: '<div style="padding: 20px;">' + 
                             '<p style="margin-bottom: 20px;">' + content + '</p>' + 
                             '<p style="color: #999; font-size: 12px;">' + time + '</p>' + 
                             '</div>'
                });
            });
            
            // 检查列表是否为空，为空则显示空状态
            function checkEmptyList() {
                var currentTab = $('.layui-tab-item.layui-show');
                var items = currentTab.find('.notification-item');
                
                if (items.length === 0) {
                    showEmptyState(currentTab);
                }
            }
            
            // 显示空状态
            function showEmptyState(container) {
                container.find('.notification-list').replaceWith(
                    '<div class="notification-empty">' +
                        '<i class="fa fa-inbox"></i>' +
                        '<p>暂无相关消息</p>' +
                    '</div>'
                );
            }
            
            // 更新徽章数量
            function updateBadgeCount() {
                // 全部消息徽章
                var allUnread = $('.notification-item.unread').length;
                $('.layui-tab-title li[lay-id="all"] .layui-badge').text(allUnread || '');
                if (allUnread === 0) {
                    $('.layui-tab-title li[lay-id="all"] .layui-badge').hide();
                } else {
                    $('.layui-tab-title li[lay-id="all"] .layui-badge').show();
                }
                
                // 系统通知徽章
                var systemUnread = $('.layui-tab-item[lay-id="system"] .notification-item.unread').length;
                $('.layui-tab-title li[lay-id="system"] .layui-badge').text(systemUnread || '');
                if (systemUnread === 0) {
                    $('.layui-tab-title li[lay-id="system"] .layui-badge').hide();
                } else {
                    $('.layui-tab-title li[lay-id="system"] .layui-badge').show();
                }
                
                // 互动提醒徽章
                var interactionUnread = $('.layui-tab-item[lay-id="interaction"] .notification-item.unread').length;
                $('.layui-tab-title li[lay-id="interaction"] .layui-badge').text(interactionUnread || '');
                if (interactionUnread === 0) {
                    $('.layui-tab-title li[lay-id="interaction"] .layui-badge').hide();
                } else {
                    $('.layui-tab-title li[lay-id="interaction"] .layui-badge').show();
                }
            }
            
            // 选项卡切换事件
            element.on('tab(notification-tab)', function(data) {
                // 切换时检查当前列表是否为空
                checkEmptyList();
            });
        });
    </script>
</body>
</html>
    