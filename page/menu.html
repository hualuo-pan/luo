<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>个人中心</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/layui/2.6.8/css/layui.css" media="all">
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css" media="all">
    <style>
        .layui-btn:not(.layui-btn-lg ):not(.layui-btn-sm):not(.layui-btn-xs) {
            height: 34px;
            line-height: 34px;
            padding: 0 15px;
        }
        .layuimini-container {
            padding: 15px;
        }
        .layuimini-main {
            background-color: #fff;
            padding: 15px;
            border-radius: 4px;
            min-height: calc(100vh - 30px);
        }
        .user-info-card {
            background-color: #f8f9fa;
            border-radius: 4px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .user-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 15px;
            display: block;
            border: 3px solid #fff;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .user-name {
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .user-joined {
            text-align: center;
            color: #666;
            font-size: 12px;
            margin-bottom: 15px;
        }
        .user-stats {
            display: flex;
            justify-content: center;
            margin-top: 15px;
        }
        .user-stat-item {
            text-align: center;
            margin: 0 15px;
        }
        .stat-number {
            font-size: 18px;
            font-weight: bold;
            color: #1E9FFF;
        }
        .stat-name {
            font-size: 12px;
            color: #666;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .search-container {
            margin-bottom: 15px;
            padding: 10px;
            background-color: #f5f5f5;
            border-radius: 4px;
        }
        .layui-form-label {
            width: 90px;
        }
        .layui-input-block {
            margin-left: 120px;
        }
        .collection-item, .publish-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            transition: background-color 0.2s;
        }
        .collection-item:hover, .publish-item:hover {
            background-color: #f9f9f9;
        }
        .item-img {
            width: 80px;
            height: 60px;
            object-fit: cover;
            border-radius: 4px;
            margin-right: 15px;
        }
        .item-info {
            flex: 1;
        }
        .item-title {
            font-size: 14px;
            margin-bottom: 5px;
            color: #333;
        }
        .item-meta {
            font-size: 12px;
            color: #666;
        }
        .item-actions {
            text-align: right;
        }
        .profile-form .layui-form-item {
            margin-bottom: 20px;
        }
        .avatar-upload {
            position: relative;
            width: 120px;
            height: 120px;
            margin-bottom: 20px;
        }
        .avatar-preview {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 1px solid #ddd;
        }
        .avatar-upload-btn {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #1E9FFF;
            color: white;
            text-align: center;
            line-height: 36px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .status-tag {
            display: inline-block;
            padding: 2px 8px;
            font-size: 12px;
            border-radius: 12px;
            margin-left: 10px;
        }
        .status-normal {
            background-color: #5FB878;
            color: white;
        }
        .status-expired {
            background-color: #FF5722;
            color: white;
        }
        .status-pending {
            background-color: #FF9800;
            color: white;
        }
    </style>
</head>
<body>
<div class="layuimini-container">
    <div class="layuimini-main">
        <blockquote class="layui-elem-quote">
            个人中心<br>
            管理您的发布、收藏和个人资料
        </blockquote>
        
        <!-- 用户信息卡片 -->
        <div class="layui-row">
            <div class="layui-col-md3">
                <div class="user-info-card">
                    <img src="https://picsum.photos/200/200?random=1" alt="用户头像" class="user-avatar">
                    <div class="user-name">张三</div>
                    <div class="user-joined">注册时间：2023-05-18</div>
                    <div class="user-stats">
                        <div class="user-stat-item">
                            <div class="stat-number">24</div>
                            <div class="stat-name">我的发布</div>
                        </div>
                        <div class="user-stat-item">
                            <div class="stat-number">36</div>
                            <div class="stat-name">我的收藏</div>
                        </div>
                        <div class="user-stat-item">
                            <div class="stat-number">128</div>
                            <div class="stat-name">获赞数</div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="layui-btn layui-btn-normal" id="edit-profile-btn">
                            <i class="fa fa-edit"></i> 编辑资料
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="layui-col-md9">
                <!-- 选项卡 -->
                <div class="layui-tab" lay-filter="personal-tabs">
                    <ul class="layui-tab-title">
                        <li class="layui-this" lay-id="my-publish">我的发布</li>
                        <li lay-id="my-collection">我的收藏</li>
                        <li lay-id="profile">个人资料</li>
                    </ul>
                    <div class="layui-tab-content">
                        <!-- 我的发布 -->
                        <div class="layui-tab-item layui-show" id="my-publish-content">
                            <div class="search-container">
                                <div class="layui-row">
                                    <div class="layui-col-md6">
                                        <div class="layui-input-group">
                                            <input type="text" id="publish-search" placeholder="搜索我的发布" class="layui-input">
                                            <div class="layui-input-group-btn">
                                                <button class="layui-btn" id="publish-search-btn">
                                                    <i class="fa fa-search"></i> 搜索
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="layui-col-md6" style="text-align: right;">
                                        <div class="layui-btn-group">
                                            <button class="layui-btn layui-btn-primary" id="publish-refresh">
                                                <i class="fa fa-refresh"></i> 刷新
                                            </button>
                                            <button class="layui-btn" id="add-publish">
                                                <i class="fa fa-plus"></i> 发布新内容
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 发布列表 -->
                            <div id="publish-list">
                                <div class="publish-item">
                                    <img src="https://picsum.photos/200/150?random=10" alt="商品图片" class="item-img">
                                    <div class="item-info">
                                        <div class="item-title">
                                            二手笔记本电脑 Apple MacBook Pro 2020款
                                            <span class="status-tag status-normal">在售</span>
                                        </div>
                                        <div class="item-meta">
                                            <span>发布时间：2023-09-15</span>
                                            <span style="margin-left: 20px;">分类：电子产品</span>
                                            <span style="margin-left: 20px;">价格：¥6800</span>
                                        </div>
                                    </div>
                                    <div class="item-actions">
                                        <button class="layui-btn layui-btn-primary layui-btn-xs" lay-event="edit">编辑</button>
                                        <button class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</button>
                                    </div>
                                </div>
                                
                                <div class="publish-item">
                                    <img src="https://picsum.photos/200/150?random=11" alt="商品图片" class="item-img">
                                    <div class="item-info">
                                        <div class="item-title">
                                            北欧风格三人沙发 灰色布艺
                                            <span class="status-tag status-normal">在售</span>
                                        </div>
                                        <div class="item-meta">
                                            <span>发布时间：2023-09-10</span>
                                            <span style="margin-left: 20px;">分类：家居用品</span>
                                            <span style="margin-left: 20px;">价格：¥950</span>
                                        </div>
                                    </div>
                                    <div class="item-actions">
                                        <button class="layui-btn layui-btn-primary layui-btn-xs" lay-event="edit">编辑</button>
                                        <button class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</button>
                                    </div>
                                </div>
                                
                                <div class="publish-item">
                                    <img src="https://picsum.photos/200/150?random=12" alt="商品图片" class="item-img">
                                    <div class="item-info">
                                        <div class="item-title">
                                            考研全套复习资料 2023版
                                            <span class="status-tag status-expired">已售出</span>
                                        </div>
                                        <div class="item-meta">
                                            <span>发布时间：2023-08-25</span>
                                            <span style="margin-left: 20px;">分类：图书音像</span>
                                            <span style="margin-left: 20px;">价格：¥150</span>
                                        </div>
                                    </div>
                                    <div class="item-actions">
                                        <button class="layui-btn layui-btn-primary layui-btn-xs" lay-event="edit">编辑</button>
                                        <button class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</button>
                                    </div>
                                </div>
                                
                                <div class="publish-item">
                                    <img src="https://picsum.photos/200/150?random=13" alt="商品图片" class="item-img">
                                    <div class="item-info">
                                        <div class="item-title">
                                            Canon EOS 80D 单反相机 18-135mm
                                            <span class="status-tag status-pending">审核中</span>
                                        </div>
                                        <div class="item-meta">
                                            <span>发布时间：2023-09-20</span>
                                            <span style="margin-left: 20px;">分类：电子产品</span>
                                            <span style="margin-left: 20px;">价格：¥5200</span>
                                        </div>
                                    </div>
                                    <div class="item-actions">
                                        <button class="layui-btn layui-btn-primary layui-btn-xs" lay-event="edit">编辑</button>
                                        <button class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 分页 -->
                            <div class="layui-box layui-laypage layui-laypage-default" style="text-align: center; margin-top: 20px;">
                                <a href="javascript:;" class="layui-laypage-prev">上一页</a>
                                <span class="layui-laypage-curr"><em class="layui-laypage-em"></em><em>1</em></span>
                                <a href="javascript:;">2</a>
                                <a href="javascript:;">3</a>
                                <a href="javascript:;">4</a>
                                <a href="javascript:;">5</a>
                                <a href="javascript:;" class="layui-laypage-next">下一页</a>
                            </div>
                        </div>
                        
                        <!-- 我的收藏 -->
                        <div class="layui-tab-item" id="my-collection-content">
                            <div class="search-container">
                                <div class="layui-row">
                                    <div class="layui-col-md6">
                                        <div class="layui-input-group">
                                            <input type="text" id="collection-search" placeholder="搜索我的收藏" class="layui-input">
                                            <div class="layui-input-group-btn">
                                                <button class="layui-btn" id="collection-search-btn">
                                                    <i class="fa fa-search"></i> 搜索
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="layui-col-md6" style="text-align: right;">
                                        <div class="layui-btn-group">
                                            <button class="layui-btn layui-btn-primary" id="collection-refresh">
                                                <i class="fa fa-refresh"></i> 刷新
                                            </button>
                                            <button class="layui-btn layui-btn-danger" id="clear-collection">
                                                <i class="fa fa-trash"></i> 清空收藏
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 收藏列表 -->
                            <div id="collection-list">
                                <div class="collection-item">
                                    <img src="https://picsum.photos/200/150?random=20" alt="商品图片" class="item-img">
                                    <div class="item-info">
                                        <div class="item-title">YAMAHA FG800 民谣吉他 41寸</div>
                                        <div class="item-meta">
                                            <span>收藏时间：2023-09-18</span>
                                            <span style="margin-left: 20px;">发布者：李女士</span>
                                            <span style="margin-left: 20px;">价格：¥1200</span>
                                        </div>
                                    </div>
                                    <div class="item-actions">
                                        <button class="layui-btn layui-btn-primary layui-btn-xs" lay-event="view">查看</button>
                                        <button class="layui-btn layui-btn-danger layui-btn-xs" lay-event="cancel">取消收藏</button>
                                    </div>
                                </div>
                                
                                <div class="collection-item">
                                    <img src="https://picsum.photos/200/150?random=21" alt="商品图片" class="item-img">
                                    <div class="item-info">
                                        <div class="item-title">亿健8008A 家用折叠跑步机</div>
                                        <div class="item-meta">
                                            <span>收藏时间：2023-09-15</span>
                                            <span style="margin-left: 20px;">发布者：王先生</span>
                                            <span style="margin-left: 20px;">价格：¥1800</span>
                                        </div>
                                    </div>
                                    <div class="item-actions">
                                        <button class="layui-btn layui-btn-primary layui-btn-xs" lay-event="view">查看</button>
                                        <button class="layui-btn layui-btn-danger layui-btn-xs" lay-event="cancel">取消收藏</button>
                                    </div>
                                </div>
                                
                                <div class="collection-item">
                                    <img src="https://picsum.photos/200/150?random=22" alt="商品图片" class="item-img">
                                    <div class="item-info">
                                        <div class="item-title">Casio G-Shock 运动手表 黑色</div>
                                        <div class="item-meta">
                                            <span>收藏时间：2023-09-10</span>
                                            <span style="margin-left: 20px;">发布者：孙先生</span>
                                            <span style="margin-left: 20px;">价格：¥650</span>
                                        </div>
                                    </div>
                                    <div class="item-actions">
                                        <button class="layui-btn layui-btn-primary layui-btn-xs" lay-event="view">查看</button>
                                        <button class="layui-btn layui-btn-danger layui-btn-xs" lay-event="cancel">取消收藏</button>
                                    </div>
                                </div>
                                
                                <div class="collection-item">
                                    <img src="https://picsum.photos/200/150?random=23" alt="商品图片" class="item-img">
                                    <div class="item-info">
                                        <div class="item-title">Canada Goose 加拿大鹅 羽绒服 黑色 M码</div>
                                        <div class="item-meta">
                                            <span>收藏时间：2023-09-05</span>
                                            <span style="margin-left: 20px;">发布者：郑女士</span>
                                            <span style="margin-left: 20px;">价格：¥2800</span>
                                        </div>
                                    </div>
                                    <div class="item-actions">
                                        <button class="layui-btn layui-btn-primary layui-btn-xs" lay-event="view">查看</button>
                                        <button class="layui-btn layui-btn-danger layui-btn-xs" lay-event="cancel">取消收藏</button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 分页 -->
                            <div class="layui-box layui-laypage layui-laypage-default" style="text-align: center; margin-top: 20px;">
                                <a href="javascript:;" class="layui-laypage-prev">上一页</a>
                                <span class="layui-laypage-curr"><em class="layui-laypage-em"></em><em>1</em></span>
                                <a href="javascript:;">2</a>
                                <a href="javascript:;">3</a>
                                <span class="layui-laypage-spr">…</span>
                                <a href="javascript:;">9</a>
                                <a href="javascript:;" class="layui-laypage-next">下一页</a>
                            </div>
                        </div>
                        
                        <!-- 个人资料 -->
                        <div class="layui-tab-item" id="profile-content">
                            <form class="layui-form profile-form" lay-filter="profile-form">
                                <div class="layui-form-item">
                                    <label class="layui-form-label">头像</label>
                                    <div class="layui-input-block">
                                        <div class="avatar-upload">
                                            <img src="https://picsum.photos/200/200?random=1" alt="用户头像" class="avatar-preview">
                                            <div class="avatar-upload-btn">
                                                <i class="fa fa-camera"></i>
                                            </div>
                                            <input type="file" id="avatar-upload" style="display: none;">
                                        </div>
                                        <div class="layui-form-mid layui-word-aux">建议上传200x200像素的图片，支持JPG、PNG格式</div>
                                    </div>
                                </div>
                                
                                <div class="layui-form-item">
                                    <label class="layui-form-label">用户名</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="username" value="张三" lay-verify="required" placeholder="请输入用户名" class="layui-input">
                                    </div>
                                </div>
                                
                                <div class="layui-form-item">
                                    <label class="layui-form-label">性别</label>
                                    <div class="layui-input-block">
                                        <input type="radio" name="gender" value="1" title="男" checked>
                                        <input type="radio" name="gender" value="0" title="女">
                                    </div>
                                </div>
                                
                                <div class="layui-form-item">
                                    <label class="layui-form-label">手机号码</label>
                                    <div class="layui-input-block">
                                        <input type="tel" name="phone" value="13800138000" lay-verify="required|phone" placeholder="请输入手机号码" class="layui-input">
                                    </div>
                                </div>
                                
                                <div class="layui-form-item">
                                    <label class="layui-form-label">电子邮箱</label>
                                    <div class="layui-input-block">
                                        <input type="email" name="email" value="zhangsan@example.com" lay-verify="email" placeholder="请输入电子邮箱" class="layui-input">
                                    </div>
                                </div>
                                
                                <div class="layui-form-item">
                                    <label class="layui-form-label">所在城市</label>
                                    <div class="layui-input-block">
                                        <select name="city" lay-verify="required">
                                            <option value="">请选择城市</option>
                                            <option value="beijing" selected>北京市</option>
                                            <option value="shanghai">上海市</option>
                                            <option value="guangzhou">广州市</option>
                                            <option value="shenzhen">深圳市</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="layui-form-item">
                                    <label class="layui-form-label">个人简介</label>
                                    <div class="layui-input-block">
                                        <textarea name="intro" placeholder="请输入个人简介" class="layui-textarea" rows="4">热爱生活，喜欢收藏各种有趣的东西，偶尔也会出售一些闲置物品。</textarea>
                                    </div>
                                </div>
                                
                                <div class="layui-form-item">
                                    <label class="layui-form-label">账号状态</label>
                                    <div class="layui-input-block">
                                        <span class="layui-form-mid"><span class="layui-badge layui-bg-green">已认证</span></span>
                                    </div>
                                </div>
                                
                                <div class="layui-form-item">
                                    <label class="layui-form-label">密码修改</label>
                                    <div class="layui-input-block">
                                        <a href="javascript:;" class="layui-btn layui-btn-primary" id="change-password">修改密码</a>
                                    </div>
                                </div>
                                
                                <div class="layui-form-item">
                                    <div class="layui-input-block">
                                        <button class="layui-btn" lay-submit lay-filter="profile-form-submit">保存修改</button>
                                        <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 编辑资料弹窗（与个人资料选项卡内容相同，用于从用户信息卡片快速编辑） -->
<div id="edit-profile-modal" style="display: none;">
    <form class="layui-form profile-form" lay-filter="edit-profile-form">
        <!-- 内容与profile-content中的表单相同 -->
        <div class="layui-form-item">
            <label class="layui-form-label">头像</label>
            <div class="layui-input-block">
                <div class="avatar-upload">
                    <img src="https://picsum.photos/200/200?random=1" alt="用户头像" class="avatar-preview">
                    <div class="avatar-upload-btn">
                        <i class="fa fa-camera"></i>
                    </div>
                    <input type="file" id="edit-avatar-upload" style="display: none;">
                </div>
                <div class="layui-form-mid layui-word-aux">建议上传200x200像素的图片，支持JPG、PNG格式</div>
            </div>
        </div>
        
        <div class="layui-form-item">
            <label class="layui-form-label">用户名</label>
            <div class="layui-input-block">
                <input type="text" name="username" value="张三" lay-verify="required" placeholder="请输入用户名" class="layui-input">
            </div>
        </div>
        
        <!-- 其他表单字段省略，与个人资料选项卡相同 -->
        <div class="layui-form-item">
            <div class="layui-input-block">
                <button class="layui-btn" lay-submit lay-filter="edit-profile-form-submit">保存修改</button>
                <button type="button" class="layui-btn layui-btn-primary" id="cancel-edit">取消</button>
            </div>
        </div>
    </form>
</div>

<!-- 修改密码弹窗 -->
<div id="change-password-modal" style="display: none;">
    <form class="layui-form" lay-filter="change-password-form">
        <div class="layui-form-item">
            <label class="layui-form-label">原密码</label>
            <div class="layui-input-block">
                <input type="password" name="old-password" lay-verify="required" placeholder="请输入原密码" class="layui-input">
            </div>
        </div>
        
        <div class="layui-form-item">
            <label class="layui-form-label">新密码</label>
            <div class="layui-input-block">
                <input type="password" name="new-password" lay-verify="required|min:6" placeholder="请输入新密码（至少6位）" class="layui-input">
            </div>
        </div>
        
        <div class="layui-form-item">
            <label class="layui-form-label">确认密码</label>
            <div class="layui-input-block">
                <input type="password" name="confirm-password" lay-verify="required|confirm:new-password" placeholder="请再次输入新密码" class="layui-input">
            </div>
        </div>
        
        <div class="layui-form-item">
            <div class="layui-input-block">
                <button class="layui-btn" lay-submit lay-filter="change-password-form-submit">确认修改</button>
                <button type="button" class="layui-btn layui-btn-primary" id="cancel-password">取消</button>
            </div>
        </div>
    </form>
</div>

<script src="https://cdn.staticfile.org/layui/2.6.8/layui.js" charset="utf-8"></script>
<script src="https://cdn.staticfile.org/jquery/3.6.0/jquery.min.js" charset="utf-8"></script>
<script>
    layui.use(['element', 'form', 'layer'], function () {
        var element = layui.element;
        var form = layui.form;
        var layer = layui.layer;
        var $ = layui.jquery;
        
        var editProfileModalIndex = null;
        var changePasswordModalIndex = null;
        
        // 编辑资料按钮点击事件
        $('#edit-profile-btn').click(function() {
            editProfileModalIndex = layer.open({
                type: 1,
                title: '编辑个人资料',
                content: $('#edit-profile-modal'),
                area: ['600px', '500px'],
                shade: 0.3
            });
        });
        
        // 取消编辑按钮点击事件
        $('#cancel-edit').click(function() {
            layer.close(editProfileModalIndex);
        });
        
        // 修改密码按钮点击事件
        $('#change-password').click(function() {
            changePasswordModalIndex = layer.open({
                type: 1,
                title: '修改密码',
                content: $('#change-password-modal'),
                area: ['500px', '350px'],
                shade: 0.3
            });
        });
        
        // 取消密码修改按钮点击事件
        $('#cancel-password').click(function() {
            layer.close(changePasswordModalIndex);
        });
        
        // 头像上传按钮点击事件
        $('.avatar-upload-btn').click(function() {
            $(this).siblings('input[type="file"]').click();
        });
        
        // 监听文件上传
        $('input[type="file"]').change(function(e) {
            // 这里只是模拟上传效果，实际项目中需要通过AJAX上传文件
            if (e.target.files && e.target.files[0]) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    $(e.target).siblings('.avatar-preview').attr('src', e.target.result);
                }
                reader.readAsDataURL(e.target.files[0]);
                
                layer.msg('头像上传成功，点击保存后生效');
            }
        });
        
        // 监听个人资料表单提交
        form.on('submit(profile-form-submit)', function(data) {
            layer.load(2);
            setTimeout(function() {
                layer.closeAll('loading');
                layer.msg('个人资料修改成功');
            }, 800);
            return false;
        });
        
        // 监听编辑资料表单提交
        form.on('submit(edit-profile-form-submit)', function(data) {
            layer.close(editProfileModalIndex);
            layer.load(2);
            setTimeout(function() {
                layer.closeAll('loading');
                layer.msg('个人资料修改成功');
                // 刷新页面数据
                location.reload();
            }, 800);
            return false;
        });
        
        // 监听修改密码表单提交
        form.on('submit(change-password-form-submit)', function(data) {
            layer.close(changePasswordModalIndex);
            layer.load(2);
            setTimeout(function() {
                layer.closeAll('loading');
                layer.msg('密码修改成功，请重新登录');
            }, 800);
            return false;
        });
        
        // 发布管理相关按钮事件
        $('#publish-refresh').click(function() {
            layer.load(2);
            setTimeout(function() {
                layer.closeAll('loading');
                layer.msg('刷新成功');
            }, 500);
        });
        
        $('#add-publish').click(function() {
            layer.msg('跳转到发布页面');
            // 实际项目中应该跳转到发布页面
            // window.location.href = 'publish.html';
        });
        
        $('#publish-search-btn').click(function() {
            var keyword = $('#publish-search').val().trim();
            if (!keyword) {
                layer.msg('请输入搜索关键词');
                return;
            }
            layer.load(2);
            setTimeout(function() {
                layer.closeAll('loading');
                layer.msg('搜索到 "' + keyword + '" 相关结果');
            }, 500);
        });
        
        // 收藏管理相关按钮事件
        $('#collection-refresh').click(function() {
            layer.load(2);
            setTimeout(function() {
                layer.closeAll('loading');
                layer.msg('刷新成功');
            }, 500);
        });
        
        $('#clear-collection').click(function() {
            layer.confirm('确定要清空所有收藏吗？', function(index) {
                layer.close(index);
                layer.load(2);
                setTimeout(function() {
                    layer.closeAll('loading');
                    layer.msg('收藏已清空');
                    // 实际项目中应该清空列表
                }, 500);
            });
        });
        
        $('#collection-search-btn').click(function() {
            var keyword = $('#collection-search').val().trim();
            if (!keyword) {
                layer.msg('请输入搜索关键词');
                return;
            }
            layer.load(2);
            setTimeout(function() {
                layer.closeAll('loading');
                layer.msg('搜索到 "' + keyword + '" 相关收藏');
            }, 500);
        });
        
        // 发布列表操作按钮事件委托
        $('#publish-list').on('click', '[lay-event]', function() {
            var event = $(this).attr('lay-event');
            var item = $(this).closest('.publish-item');
            var title = item.find('.item-title').text().trim();
            
            if (event === 'edit') {
                layer.msg('编辑发布：' + title);
                // 实际项目中应该打开编辑弹窗
            } else if (event === 'del') {
                layer.confirm('确定要删除发布 "' + title + '" 吗？', function(index) {
                    layer.close(index);
                    item.remove();
                    layer.msg('删除成功');
                });
            }
        });
        
        // 收藏列表操作按钮事件委托
        $('#collection-list').on('click', '[lay-event]', function() {
            var event = $(this).attr('lay-event');
            var item = $(this).closest('.collection-item');
            var title = item.find('.item-title').text().trim();
            
            if (event === 'view') {
                layer.msg('查看收藏：' + title);
                // 实际项目中应该跳转到详情页
            } else if (event === 'cancel') {
                layer.confirm('确定要取消收藏 "' + title + '" 吗？', function(index) {
                    layer.close(index);
                    item.remove();
                    layer.msg('已取消收藏');
                });
            }
        });
        
        // 搜索框回车事件
        $('#publish-search, #collection-search').keydown(function(e) {
            if (e.keyCode === 13) {
                $(this).closest('.layui-input-group').find('.layui-btn').click();
            }
        });
    });
</script>
</body>
</html>
